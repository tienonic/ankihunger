<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Tool</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
</head>
<body>

<!-- LAUNCHER -->
<div id="launcher">
  <div class="launcher-card">
    <h1 class="launcher-title">Study Tool</h1>
    <p class="launcher-subtitle">FSRS-Powered Spaced Repetition</p>
    <div class="launcher-buttons" id="launcher-buttons">
      <button class="launcher-btn launcher-btn-secondary" id="launch-file">Open Project File (.json)</button>
      <input type="file" id="file-input" accept=".json" style="display:none">
    </div>
    <div class="drop-zone" id="drop-zone">
      <span class="drop-zone-text">or drag &amp; drop a .json project file here</span>
    </div>
    <div class="launcher-recent" id="launcher-recent"></div>
    <div class="launcher-error" id="launcher-error"></div>
  </div>
</div>

<!-- STUDY APP (hidden until project loads) -->
<div id="study-app" style="display:none">
  <div class="header-wrap" id="header-wrap">
    <header>
      <div class="header-top">
        <button class="back-btn" id="back-btn" title="Back to launcher">&larr;</button>
        <h1 id="app-title">Study Tool</h1>
        <label class="sync-toggle" id="sync-toggle" title="Sync activity trendline across sections — toggling resets activity data">
          <input type="checkbox" id="sync-activity-toggle" checked>
          <span class="sync-toggle-label">sync</span>
        </label>
        <button class="tips-btn" id="tips-btn" title="Show keyboard shortcuts">Tips</button>
      </div>
      <div class="tabs" id="tabs"></div>
      <div class="header-pull" id="header-pull">&#9660;</div>
    </header>
  </div>

  <div class="top-toggles" id="top-toggles">
    <label class="top-toggle easy-toggle" id="easy-toggle" title="Auto-rate by answer speed">
      <input type="checkbox" id="easy-mode-toggle">
      <span class="top-toggle-label">simple</span>
    </label>
    <label class="top-toggle zen-toggle" id="zen-toggle" title="Focus mode — hide extra UI">
      <input type="checkbox" id="zen-mode-toggle">
      <span class="top-toggle-label">zen</span>
    </label>
  </div>

  <div class="sidebar-right" id="sidebar-right" style="display:none">
    <div class="terms-dropdown" id="terms-dropdown">
      <button class="terms-toggle-btn" id="terms-toggle-btn">Terms &#9660;</button>
      <div class="terms-list" id="terms-list-wrap" style="display:none">
        <div class="activity-terms" id="activity-terms"></div>
      </div>
    </div>
    <div class="activity-widget" id="activity-widget">
      <div class="activity-score-label" id="activity-score">0</div>
      <div class="activity-chart-wrap">
        <canvas id="activity-chart" width="180" height="100"></canvas>
      </div>
      <div class="activity-widget-stats">
        <div class="activity-stats" id="activity-stats"></div>
        <div class="activity-stats" id="activity-score-stats"></div>
      </div>
      <button class="activity-reset-btn" id="activity-reset-btn" title="Reset activity data">reset</button>
    </div>
  </div>

  <main>
    <div id="sections-container"></div>
  </main>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>
